<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
            <!-- Bootstrap CSS -->
       <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
       <!--Google Icon Font-->
       <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Our Custom CSS -->

    <link rel="stylesheet" href="css/style2.css">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

       <link rel="stylesheet" href="css/leaflet.css">
       <link rel="stylesheet" href="css/qgis2web.css"><link rel="stylesheet" href="css/fontawesome-all.min.css">
            <!-- jQuery first, then Popper.js, then Bootstrap JS, then Propeller js -->
        <!-- <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> -->
        <link rel="stylesheet" href="css/style.css">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	      
        <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
        <style>
        #map {
            width: 500px;
            height: 450px;
            left: 6%; 
            display:inline-block;
        }
        #map1{
          display:block;
          width: 800px;
          height: 500px;
        }
        .overlay {
            position:absolute;
            top:23%;
            left: 8%;
            background-color: #073856;
            padding: 20px;
            border-radius: 5px;
            z-index:999;
        }
        .overlay label {
            color: white;
            margin: 5px 0px;
            display: inline-block;
            font-family:'Open Sans', sans-serif;
            font-size: 14px;
        }
        #myDiv {
            height: 450px;
            width: 500px;
            margin: 3%;
            float: right;
            display: inline-block;
        }
        #myDiv1 {
            height: 450px;
            width: 500px;
            margin: 3%;
            float: right;
            display: inline-block;
        }
        #myDiv2 {
            height: 450px;
            width: 500px;
            margin: 3%;
            float: right;
            display: inline-block;
        }
        #myDiv3 {
            height: 450px;
            width: 500px;
            margin: 3%;
            float: right;
            display: inline-block;
        }
        h2{
          text-align: center;
        }
        #img{
          margin-left: 0;
          height: 500px;
          overflow-y: scroll;
        }
        #floating-panel {
        position: absolute;
        top: 17%;
        left: 30%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: "Roboto", "sans-serif";
        line-height: 30px;
        padding-left: 10px;
      }

      #floating-panel {
        background-color: #fff;
        border: 1px solid #999;
        top: 17%;
        left: 30%;
        padding: 5px;
        position: absolute;
        z-index: 5;
      }
      .map-overlay {
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        position: absolute;
        width: 25%;
        top: 16%;
        left: 12%;
        padding: 13px;
        padding: 10px;
        z-index: 5;
      }
 
.map-overlay .map-overlay-inner {
background-color: #fff;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
border-radius: 3px;
padding: 10px;
margin-bottom: 10px;
}
 
.map-overlay h2 {
line-height: 24px;
display: block;
margin: 0 0 10px;
}
 
.map-overlay .legend .bar {
height: 10px;
width: 100%;
background: linear-gradient(to right, #fca107, #7f3121);
}
 
.map-overlay input {
background-color: transparent;
display: inline-block;
width: 100%;
position: relative;
margin: 0;
cursor: ew-resize;
}
        </style>
        <title></title>
        <script>
        // var timelineSlider = $("#slider");
        // var date = $("#slider>div");
        // var initialValue = 2000;
        // var handle = null;
        // var updateSliderValue = function(event, ui){
        // handle = handle || $(".ui-slider-handle", timelineSlider);
        // date.text(ui.value || initialValue).css(handle.position());
        // };
        // $(function(){
        //   $("#slider").slider({
        //     min: 2000, max: 2020,
        //     slide: updateSliderValue,
        //     create: updateSliderValue,
        //     value: initialValue,
        //   });
        // });
       </script>
    </head>
    <body>
      <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>Menu</h3>
            </div>
            <ul class="list-unstyled components">
                <p>Data analysis</p>
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Sensor data</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#" id="co2">CO2</a>
                        </li>
                        <li>
                            <a href="#" id="temp">Temperature</a>
                        </li>
                        <li>
                            <a href="#" id="humidity">Humidity</a>
                        </li>
                    </ul>
                </li>
                <li class="active">
                  <a href="#lanes" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Quantity</a>
                  <ul class="collapse list-unstyled" id="lanes">
                      <li>
                          <a href="#" id="qty">Quantity</a>
                      </li>
                      <li>
                          <a href="#" id="lane1">Lane1</a>
                      </li>
                      <li>
                          <a href="#" id="lane2">Lane2</a>
                      </li>
                      <li>
                          <a href="#" id="lane3">Lane3</a>
                      </li>
                  </ul>
                </li>
                <!-- <p>Trend</p> -->
                <li class="active">
                  <a href="#week1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Week1</a>
                        <ul class="collapse list-unstyled" id="week1">
                          <li>
                              <a href="#" id="co2">CO2</a>
                          </li>
                          <li>
                              <a href="#" id="temp">Temperature</a>
                          </li>
                          <li>
                              <a href="#" id="humidity">Humidity</a>
                          </li>
                          <li>
                            <a href="#" id="qty">Quantity</a>
                          </li>
                        </ul>
                    </li>
                    <li class="active">
                      <a href="#week2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Week2</a>
                            <ul class="collapse list-unstyled" id="week2">
                              <li>
                                  <a href="#" id="co2">CO2</a>
                              </li>
                              <li>
                                  <a href="#" id="temp">Temperature</a>
                              </li>
                              <li>
                                  <a href="#" id="humidity">Humidity</a>
                              </li>
                              <li>
                                <a href="#" id="qty">Quantity</a>
                              </li>
                            </ul>
                        </li>
                        <li class="active">
                          <a href="#week3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Week3</a>
                                <ul class="collapse list-unstyled" id="week3">
                                  <li>
                                      <a href="#" id="co2">CO2</a>
                                  </li>
                                  <li>
                                      <a href="#" id="temp">Temperature</a>
                                  </li>
                                  <li>
                                      <a href="#" id="humidity">Humidity</a>
                                  </li>
                                  <li>
                                    <a href="#" id="qty">Quantity</a>
                                  </li>
                                </ul>
                        </li>
                </li>
                <li class="active">
                  <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Monthly data</a>
                  <ul class="collapse list-unstyled" id="pageSubmenu">
                      <li>
                          <a href="#" id="month1">All months</a>
                      </li>
                  </ul>
              </li>
            </ul>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
            <ul class="list-unstyled CTAs">
                <li>
                    <a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download">Download CSV</a>
                </li>
                <li>
                    <a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article">Back to homepage</a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content">
<!-- 
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i>
                        <span>Toggle</span>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="#">Forecast data</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Predictive analysis</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Soil analysis</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav> -->
      <h2>Smart Agri Analysis</h2>
        <!-- <div class="overlay zindex">
            <input type="checkbox" id="check1" onclick="change();">
            <label>CO2 Heatmap</label>
            <br>
            <input type="checkbox" id="check2" onclick="change1();">
            <label>Temp Heatmap</label>
            <br>
            <input type="checkbox" id="check3" onclick="change2();">
            <label>Humidity Heatmap</label>
            <br>
            <input type="checkbox" id="check4" onclick="change3();">
            <label>Quantity Heatmap</label>
        </div> -->
        <div id="floating-panel">
          <button onclick="toggleHeatmap()">Toggle Heatmap</button>
          <button onclick="toggleParanoma()">Toggle Paranoma</button>
          <button onclick="toggleMarkers()">Toggle Markers</button>
          <button onclick="togglePath()">Toggle Path</button>
        </div>
        <div id="map1"></div>
        <div id="myDiv"> 
        </div>
        <div id="myDiv1"> 
        </div>
        <div id="myDiv2"> 
        </div>
        <div id="myDiv3"> 
        </div>
        <!-- <div class="wrapper">
        <div id="slider">
          <div class="year"></div>
        </div>
        </div> -->
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/leaflet-heat.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="data/data_1_1.js"></script>
        <script>
        function toggleHeatmap(){
         
        }

        var img =['css/images/1.jpg','css/images/2.jpg','css/images/3.jpg','css/images/4.jpg','css/images/5.jpg','css/images/6.jpg','css/images/7.jpg','css//images/8.jpg',
        'css/images/9.jpg','css/images/10.jpg','css/images/11.jpg','css/images/12.jpg','css/images/13.jpg','css/images/14.jpg'];
        Plotly.d3.csv("data/detected_data.csv", function(data){ processData(data) } );
        Plotly.d3.csv("data/detected_data1.csv", function(data){ processData1(data) } );
        Plotly.d3.csv("data/detected_data2.csv", function(data){ processData2(data) } );
        Plotly.d3.csv("data/detected_data3.csv", function(data){ processData3(data) } );
        Plotly.d3.csv("data/detected_data4.csv", function(data){ processData4(data) } );

function processData(allRows){
  console.log(allRows);
  var id = [], timestamp = [], temp=[], humidity=[], lat=[], lon=[], co2=[], quantity=[], images=[];
  for (var i=0; i<allRows.length; i++) {
    row = allRows[i];
    id.push( row['id'] );
    timestamp.push( row['timestamp'] );
    temp.push( row['temp'] ); 
    humidity.push( row['humidity'] );
    lat.push( row['lat'] );
    lon.push( row['lon'] );
    co2.push( row['co2'] );
    quantity.push( row['quantity'] );
  }
  console.log( 'X',timestamp, 'Y',co2 );
  $('#temp').click(function(){
    $('#myDiv1,#myDiv2,#myDiv3').hide();
    $('#myDiv').show();
    makePlotly(temp,timestamp);
    makeHeatmap(lat,lon,temp);
  });
  $('#humidity').click(function(){
    $('#myDiv,#myDiv2,#myDiv3').hide();
    $('#myDiv1').show();
    makePlotly1(humidity,timestamp);
    makeHeatmap2(lat,lon,humidity);
  });
    //makePlotly3(quantity,timestamp);
    //makePlotly2(co2,timestamp);
  $('#co2').click(function(){
    $('#myDiv3,#myDiv,#myDiv1').hide();
    $('#myDiv2').show();
    makePlotly2(co2,timestamp);
    makeHeatmap1(lat,lon,co2);
  }); 
  $('#qty').click(function(){
    $('#myDiv1,#myDiv2,#myDiv').hide();
    $('#myDiv3').show();
    makePlotly3(quantity,timestamp);
    makeHeatmap3(lat,lon,quantity);
  });

  for(i=0;i<allRows.length;i++){
    var image = document.createElement("img");
    var str = timestamp[i];
    var res = str.replaceAll(':', '_');
    console.log(res);
    image.src= 'css/images/'+res+'.jpg';
    //document.getElementById('img').append(image);
  }
 }
      
function processData1(allRows1){
  console.log(allRows1);
  var id = [], timestamp = [], temp=[], humidity=[], lat=[], lon=[], co2=[], quantity=[], images=[];
  for (var i=0; i<allRows1.length; i++) {
    row = allRows1[i];
    id.push( row['id'] );
    timestamp.push( row['timestamp'] );
    temp.push( row['temp'] ); 
    humidity.push( row['humidity'] );
    lat.push( row['lat'] );
    lon.push( row['lon'] );
    co2.push( row['co2'] );
    quantity.push( row['quantity'] );
  }
  console.log( 'X',timestamp, 'Y',co2 );
  $('#week1 #temp').click(function(){
    $('#myDiv1,#myDiv2,#myDiv3').hide();
    $('#myDiv').show();
    makePlotly(temp,timestamp);
    makeHeatmap(lat,lon,temp);
  });
  $('#week1 #humidity').click(function(){
    $('#myDiv,#myDiv2,#myDiv3').hide();
    $('#myDiv1').show();
    makePlotly1(humidity,timestamp);
    makeHeatmap2(lat,lon,humidity);
  });
    //makePlotly3(quantity,timestamp);
    //makePlotly2(co2,timestamp);
  $('#week1 #co2').click(function(){
    $('#myDiv3,#myDiv,#myDiv1').hide();
    $('#myDiv2').show();
    makePlotly2(co2,timestamp);
    makeHeatmap1(lat,lon,co2);
  }); 
  $('#week1 #qty').click(function(){
    $('#myDiv1,#myDiv2,#myDiv').hide();
    $('#myDiv3').show();
    makePlotly3(quantity,timestamp);
    makeHeatmap3(lat,lon,quantity);
  });
}

function processData2(allRows2){
  console.log(allRows2);
  var id = [], timestamp = [], temp=[], humidity=[], lat=[], lon=[], co2=[], quantity=[], images=[];
  for (var i=0; i<allRows2.length; i++) {
    row = allRows2[i];
    id.push( row['id'] );
    timestamp.push( row['timestamp'] );
    temp.push( row['temp'] ); 
    humidity.push( row['humidity'] );
    lat.push( row['lat'] );
    lon.push( row['lon'] );
    co2.push( row['co2'] );
    quantity.push( row['quantity'] );
  }
  console.log( 'X',timestamp, 'Y',co2 );
  $('#week2 #temp').click(function(){
    $('#myDiv1,#myDiv2,#myDiv3').hide();
    $('#myDiv').show();
    makePlotly(temp,timestamp);
    makeHeatmap(lat,lon,temp);
  });
  $('#week2 #humidity').click(function(){
    $('#myDiv,#myDiv2,#myDiv3').hide();
    $('#myDiv1').show();
    makePlotly1(humidity,timestamp);
    makeHeatmap2(lat,lon,humidity);
  });
    //makePlotly3(quantity,timestamp);
    //makePlotly2(co2,timestamp);
  $('#week2 #co2').click(function(){
    $('#myDiv3,#myDiv,#myDiv1').hide();
    $('#myDiv2').show();
    makePlotly2(co2,timestamp);
    makeHeatmap1(lat,lon,co2);
  }); 

  $('#week2 #qty').click(function(){
    $('#myDiv1,#myDiv2,#myDiv').hide();
    $('#myDiv3').show();
    makePlotly3(quantity,timestamp);
    makeHeatmap3(lat,lon,quantity);
  });
}

function processData3(allRows3){
  console.log(allRows3);
  var id = [], timestamp = [], temp=[], humidity=[], lat=[], lon=[], co2=[], quantity=[], images=[];
  for (var i=0; i<allRows3.length; i++) {
    row = allRows3[i];
    id.push( row['id'] );
    timestamp.push( row['timestamp'] );
    temp.push( row['temp'] );  
    humidity.push( row['humidity'] );
    lat.push( row['lat'] );
    lon.push( row['lon'] );
    co2.push( row['co2'] );
    quantity.push( row['quantity'] );
  }
  console.log( 'X',timestamp, 'Y',co2 );  
  $('#week3 #temp').click(function(){
    $('#myDiv1,#myDiv2,#myDiv3').hide();
    $('#myDiv').show();
    makePlotly(temp,timestamp);
    makeHeatmap(lat,lon,temp);
  });
  $('#week3 #humidity').click(function(){
    $('#myDiv,#myDiv2,#myDiv3').hide();
    $('#myDiv1').show();
    makePlotly1(humidity,timestamp);
    makeHeatmap2(lat,lon,humidity);
  });
    //makePlotly3(quantity,timestamp);
    //makePlotly2(co2,timestamp);
  $('#week3 #co2').click(function(){
    $('#myDiv3,#myDiv,#myDiv1').hide();
    $('#myDiv2').show();
    makePlotly2(co2,timestamp);
    makeHeatmap1(lat,lon,co2);
  }); 
  $('#week3 #qty').click(function(){
    $('#myDiv1,#myDiv2,#myDiv').hide();
    $('#myDiv3').show();
    makePlotly3(quantity,timestamp);
    makeHeatmap3(lat,lon,quantity);
  });
}

var months = [
'January',
'February',
'March',
'April',
'May',
'June',
'July',
'August',
'September',
'October',
'November',
'December'
];
 
function filterBy(month) {
var filters = ['==', 'month', month];
map.setFilter('', filters);
map.setFilter('', filters);
// Set the label to the month
document.getElementById('month').textContent = months[month];
}

function processData4(allRows4){
  console.log(allRows4);
  var id = [], timestamp = [], temp=[], humidity=[], lat=[], lon=[], co2=[], quantity=[], images=[];
  for (var i=0; i<allRows4.length; i++) {
    row = allRows4[i];
    id.push( row['id'] );
    timestamp.push( row['timestamp'] );
    temp.push( row['temp'] ); 
    humidity.push( row['humidity'] );
    lat.push( row['lat'] ); 
    lon.push( row['lon'] );
    co2.push( row['co2'] );
    quantity.push( row['quantity'] );
  }
  console.log( 'X',timestamp, 'Y',co2 );
  $('#month1').click(function(){
    $('#map1').hide();
    $('#myDiv,#myDiv1,#myDiv2,#myDiv3').css('display','inline-block');
    makePlotly(temp,timestamp);
    makePlotly1(co2,timestamp);
    makePlotly2(humidity,timestamp);
    makePlotly3(quantity,timestamp);
    //makeHeatmap(lat,lon,temp);
  });
}

function makePlotly(temp,timestamp){
  var myPlot = document.getElementById('myDiv');
  var data_1 = [
  {
    x: timestamp,
    y: temp,
    type: 'scatter'
  }]
  Plotly.newPlot('myDiv', data_1, layout_chart);
  myPlot.on('plotly_click', function(){
    console.log(data.points[0].x);
  });
}

function makePlotly1(humidity,timestamp){
var myPlot1 = document.getElementById('myDiv1'); 
  var data_2 = [
  {
    x: timestamp,
    y: humidity,
    type: 'scatter'
  }]
  Plotly.newPlot('myDiv1', data_2, layout_chart);
  myPlot1.on('plotly_click', function(){
    alert('You clicked this Plotly chart!');
    console.log(data.points[0].x);
  });
}

function makePlotly2(co2,timestamp){
var myPlot2 = document.getElementById('myDiv2');
var data_3 = [
  {
    x: timestamp,
    y: co2,
    type: 'scatter'
  }]
  Plotly.newPlot('myDiv2', data_3, layout_chart);
  myPlot2.on('plotly_click', function(){
    alert('You clicked this Plotly chart!');
  });
}

function makePlotly3(quantity,timestamp){
var myPlot3 = document.getElementById('myDiv3');
var data_4 = [
  {
    x: timestamp,
    y: quantity,
    type: 'scatter'
  }
]
Plotly.newPlot('myDiv3', data_4, layout_chart);
myPlot3.on('plotly_click', function(){
    alert('You clicked this Plotly chart!');
});
}

var layout_chart = {
  autosize: false,
  width: 600,
  height: 500,
  margin: {
    l: 50,
    r: 50,
    b: 100,
    t: 100,
    pad: 4
  },
  yaxis:{title:'Magnitude'}
};

function makeHeatmap(lat,lon,temp){
  var data = [
        {type: "densitymapbox", lon:lon, lat:lat, z:temp,
        radius: 60, colorbar: {y: 1, yanchor: 'top', len: 0.5},colorscale:'Portland'}
      ];
      Plotly.newPlot('map1', data, layout, config);
      map1.on('plotly_click', function(){
       window.open('test2.html','_blank');
      });
}

function makeHeatmap1(lat,lon,co2){
 var data_co2 = [
      {type: "densitymapbox", lon: lon, lat: lat, z: co2,
      radius: 60, colorbar: {y: 1, yanchor: 'top', len: 0.5},colorscale:'YlGnBu'}];
      Plotly.newPlot('map1', data_co2, layout, config);
      map1.on('plotly_click', function(){
       window.open('test2.html','_blank');
      });
}

function makeHeatmap2(lat,lon,humidity){
var data_humidity = [
      {type: "densitymapbox", lon: lon, lat: lat, z: humidity,
      radius: 60, colorbar: {y: 1, yanchor: 'top', len: 0.5},colorscale:'Electric'}];
      Plotly.newPlot('map1', data_humidity, layout, config);
      map1.on('plotly_click', function(){
       window.open('test2.html','_blank');
      });
}

function makeHeatmap3(lat,lon,quantity){
 var data_qty = [
      {type: "densitymapbox", lon: lon, lat: lat, z: quantity,
      radius: 60, colorbar: {y: 1, yanchor: 'top', len: 0.5},colorscale:'Viridis'}];
      Plotly.newPlot('map1', data_qty, layout, config);
      map1.on('plotly_click', function(){
       window.open('test2.html','_blank');
      });
}
        
var layout = {mapbox: {style: 'mapbox://styles/mapbox/satellite-v9', center: {lat: 36.12073400669619,lon: 139.21555254377927}, zoom:19}, width: 1200, height: 600};
var config = {mapboxAccessToken: "pk.eyJ1IjoiY2llbG9naW56YWZhcm0iLCJhIjoiY2tnMGczbjIyMGQwMTJybGI4MGJsNTBzbSJ9.pPLT9Q2Kj_dUVW7BAqAyHw"};
    
filterBy(0);
document.getElementById('slider').addEventListener('input', function (e) {
var month = parseInt(e.target.value, 10);
filterBy(month);
});

        </script>
    </body>
</html>
